<!DOCTYPE html>
<html xmlns:joola="http://joo.la/ns/1.0">
<head lang="en">
  <meta charset="UTF-8">
  <title></title>
  <script src="/standalone-framework.src.js"></script>
  <script src="/highcharts.src.js"></script>
  <script src="/joola.js?APIToken=apitoken-demo"></script>
</head>
<body>
<div id="timeline" style="height:350px"></div>
<div id="bartable"></div>
<script>
  joola.on('ready', function () {
    var timeline = new joola.viz.Timeline({
      container: '#timeline',
      caption: 'My first metric',
      query: {
        timeframe: 'last_minute',
        interval: 'second',
        metrics: ['value'],
        collection: 'temp',
        realtime: true
      }
    });
    new joola.viz.BarTable({
      container: '#bartable',
      caption: 'My second metric',
      query: {
        timeframe: 'last_minute',
        interval: 'second',
        dimensions: ['attribute'],
        metrics: ['value'],
        collection: 'temp',
        realtime: true
      }
    }).on('select', function (sel) {
          console.log('sel', sel)
          timeline.options.query[0].filter=[
              ['attribute','eq',sel.dimensions.attribute]
          ];
          timeline.destroy();
          joola.viz.initialize(timeline);
          console.log( timeline.options.query[0].filter)
        });
  });
</script>

</body>
</html>