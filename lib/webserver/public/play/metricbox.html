<!DOCTYPE html>
<html xmlns:joola="http://joo.la/ns/1.0">
<head lang="en">
  <meta charset="UTF-8">
  <title></title>
  <script src="/joola.js?APIToken=apitoken-demo"></script>
  <style>
    .clearfix {
      clear: both;
    }

    [jio-type="metric"] .value {
      transition: all 0.3s ease-in;
    }

    [jio-type="metric"] .value.glow {
      text-shadow: 0 0 50px #40DA7C;
    }
  </style>
</head>
<body>
<div id="metric"></div>
<div id="canvas">
  <div id="datepicker"></div>
  <div class="clearfix"></div>
  <div id="metric1"></div>
  <div id="metric2"></div>
  <div id="metric3"></div>
  <div id="metric4"></div>
</div>

<script>
  joola.on('ready', function () {
    new joola.viz.Metric({
      container: '#metric',
      caption: 'Default w/o canvas',
      query: {
        timeframe: 'last_5_seconds',
        interval: 'day',
        metrics: ['mousemoves'],
        collection: 'demo-mousemoves',
        realtime: true
      }
    });
    new joola.viz.Canvas({
      container: '#canvas',
      datepicker: {
        container: '#datepicker'
      },
      visualizations: {
        metric1: {
          type: 'metric',
          caption: 'Default w/ canvas',
          container: '#metric1',
          query: {
            dimensions: [],
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves'
          }
        },
        metric2: {
          type: 'metric',
          caption: 'Formatting',
          container: '#metric2',
          query: {
            dimensions: [],
            metrics: [
              {
                key: 'mousemoves',
                decimals: 4,
                commas: false,
                suffix: 'ms',
                prefix: '$'
              }
            ],
            collection: 'demo-mousemoves'
          }
        },
        metric3: {
          type: 'metric',
          caption: 'Glow effect',
          container: '#metric3',
          update: function (data, alldata) {
            var self = this;
            this.options.$container.find('.value').addClass('glow');
            setTimeout(function () {
              self.options.$container.find('.value').removeClass('glow');
            }, 1000);
          },
          query: {
            dimensions: [],
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves',
            realtime: true
          }
        },
        metric4: {
          type: 'metric',
          caption: 'Different template',
          container: '#metric4',
          template: '<div class="jio metricbox">' +
          '<div class="caption"></div>' +
          '<div class="value"></div>' +
          '<div class="summary" style="display:none;">' +
          '<span class="base"></span>' +
          '<span class="sep">vs.</span>' +
          '<span class="compare"></span>' +
          '</div>' +
          '</div>',
          query: {
            dimensions: [],
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves'
          }
        }
      }
    });
  });
</script>

</body>
</html>